import{b as i}from"./firebase-init-C-AE0vWN.js";/* empty css                   */import"./lazy-loader-CPsUXe95.js";class o{constructor(t){this.bookingId=t,this.trackingRef=db.collection("tracking").doc(t),this.map=null,this.marker=null}initMap(){this.map=new google.maps.Map(document.getElementById("tracking-map"),{center:{lat:20.5937,lng:78.9629},zoom:5})}startTracking(){this.initMap(),this.trackingRef.onSnapshot(t=>{if(t.exists){const e=t.data();this.updateMapMarker(e.latitude,e.longitude),this.updateStatus(e.status),this.updateETA(e.estimatedDelivery)}else console.log("No tracking data found for this booking.")})}updateMapMarker(t,e){const n=new google.maps.LatLng(t,e);this.marker?this.marker.setPosition(n):this.marker=new google.maps.Marker({position:n,map:this.map}),this.map.setCenter(n),this.map.setZoom(12)}updateStatus(t){const e=document.getElementById("tracking-status");if(!e)return;const n={picked:"Parcel Picked Up",in_transit:"In Transit",out_for_delivery:"Out for Delivery",delivered:"Delivered"};e.textContent=n[t]||t}updateETA(t){const e=document.getElementById("tracking-eta");e&&(t&&t.toDate?e.textContent=`Estimated Delivery: ${t.toDate().toLocaleString()}`:e.textContent="Estimated Delivery: Not available")}}function s(){const t=new URLSearchParams(window.location.search).get("bookingId");t?(document.getElementById("booking-id-display").textContent=`Booking ID: ${t}`,new o(t,i).startTracking()):(document.getElementById("tracking-status").textContent="No booking ID provided.",document.getElementById("tracking-eta").textContent="-",document.getElementById("booking-id-display").textContent="Please provide a booking ID in the URL.")}window.initTracking=s;document.addEventListener("DOMContentLoaded",()=>{LazyLoader.init()});
